<!DOCTYPE html>
<html>
<head>
    <title>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</title>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; text-align: center; padding: 20px; }
        button { padding: 15px 30px; background: #4CAF50; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h2>üé∏ –Ø –æ–ø–ª–∞—Ç–∏–ª –∞–±–æ–Ω–µ–º–µ–Ω—Ç!</h2>
    <button onclick="sendData()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>

    <script>
        const tg = window.Telegram.WebApp;
        const user = tg.initDataUnsafe.user;

        async function sendData() {
            if (!user?.username) {
                alert("–û—à–∏–±–∫–∞: –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram!");
                return;
            }

            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ (Google Apps Script)
                const response = await fetch('https://script.google.com/macros/s/AKfycbxJiPhpZAmk0rycsd5uC18grnpqpcUx3qZO7JMhWgUm25v7I3zPJ5PkQSZxOpnVfggp/exec', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: user.username })
                });

                const result = await response.json();
                if (result.status === 'success') {
                    tg.close();
                } else {
                    alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');
                }
            } catch (error) {
                alert('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è');
            }
        }
    </script>
</body>
</html>